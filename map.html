<html>
<head>
<title>Aluvi</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<link href="style.css" rel="stylesheet">
<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />

</head>

<body>


<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.mapbox.css' rel='stylesheet' />
<!--[if lt IE 9]>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.ie.css' rel='stylesheet' />
<![endif]-->
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/css/font-awesome.min.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet' />


<div class="container2">
	
	<div class="resultsContainer">

		<div class="result">
		<h2 class="resultType">Carpool</h2>
		<p class="resultDescription"> Make extra cash doing what you already do! Pick up coworkers on your drive to work by downlading the Aluvi app for <a target="_blank" href="https://itunes.apple.com/us/app/aluvi/id914223284?mt=8">iOS</a> or <a target="_blank" href="https://play.google.com/store/apps/details?id=com.aluvi.android">Android</a></p>
		</div>


<div class="result">
                <h2 class="resultType">Vanpool</h2>               
 <p class="resultDescription"> Meet your co-workers at one of the vanpool pickup spots. There is one near your house, get in on the planning <a target="_blank" href="#">here.</a></p>
                </div>

<div class="result">
                <h2 class="resultType">Public Transport</h2>               
 <p class="resultDescription"> Walk or ride your bike to these bus stops: 
<br>
This stop
<br>
This next stop
<br>
etc. </p>
               </div>


<div class="result">
                <h2 class="resultType">Ferry</h2>              
  <p class="resultDescription">Bike to the ferry! Plan the details <a target="_blank" href="http://goldengateferry.org/schedules/Sausalito.php">here.</a></p>

                </div>


	</div>



	<div class="mapContainer">
		<div id="map">
		</div>
	</div>


</div>




<script>

// TODO: add id's to trasportation options in htlm
// fake testing polygon
// show and hide id's 

// Data Structure

// 4 variables : zipcode1, transportModes1, zipcode2, transportModes2

var zipcode1 = {
	"geometry":{
		"type": "Polygon",
		"coordinates":[ [0,0 ], [0,0] ]  // need some coordinates
	},
	"title": "XXXXX"
};


var transportationModes1 = {
	"carpool":{
		"coordinates":[ [0,0], [1,1], [2,2] ]
	},
	"vanpool":{
		"coordinates":[ [3,3], [4,4], [5,5] ]
	}
};

</script>




<script>
// Dummy Logic
 
var qs = (function(a) {
    if (a == "") return {};
    var b = {};
    for (var i = 0; i < a.length; ++i)
    {
        var p=a[i].split('=', 2);
        if (p.length == 1)
            b[p[0]] = "";
        else
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
    }
    return b;
})(window.location.search.substr(1).split('&'));

if(qs.zip == '12345') {
 var zipcode = zipcode1;
 var transportModes = transportationModes1;
}
//else if

</script>


<script>
// View Scrips
L.mapbox.accessToken = 'pk.eyJ1IjoiYWx1dmltYXBzIiwiYSI6ImJlYjg2M2FmNjA4OGZhYjk2ZDRhMGFiZjY1MDQ3ZGYwIn0.2bARToCtaZXue3KJm-WYPQ';
// Create a map in the div #map
var map = L.mapbox.map('map', 'aluvimaps.o4c16jlk')
    .setView([37.863, -122.375], 11);
    L.control.locate().addTo(map);

var myLayer = L.mapbox.featureLayer().addTo(map);

var zipcodeStyle = {
        "type": "Feature",
        "geometry": zipcode.geometry,
        "properties": {
                "title": zipcode.title
        }
};

var keys = Object.keys(transportModes);
keys.forEach(function(key){

//geojson codes and styling for each maybe a loop or not
// get element by id and set to visible

});



//myLayer.addPolygon or something
// as in, add the polygon to the map


var geoJson = [{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [-122.514733, 37.880298]
    },
    "properties": {
        "title": "glassdoor",
        "icon": {
            "iconUrl": "resources/glassdoor_marker.png",
            "iconSize": [62, 60], // size of the icon
            "iconAnchor": [30, 62], // point of the icon which will correspond to marker's location
            "popupAnchor": [-7, -65], // point from which the popup should open relative to the iconAnchor
            "className": "dot"
        }
    }
}, {
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [-122.393326, 37.795748]
    },
    "properties": {
        "title": "San Francisco Ferry Bldg.",
        "icon": {
            "iconUrl": "resources/ferry_marker.png",
            "iconSize": [62, 60], // size of the icon
            "iconAnchor": [30, 62], // point of the icon which will correspond to marker's location
            "popupAnchor": [-7, -65], // point from which the popup should open relative to the iconAnchor
            "className": "dot"
        }
    }
},{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [-122.478122, 37.856561]
    },
    "properties": {
        "title": "Sausalito Ferry Landing",
        "icon": {
            "iconUrl": "resources/ferry_marker.png",
            "iconSize": [62, 60], // size of the icon
            "iconAnchor": [30, 62], // point of the icon which will correspond to marker's location
            "popupAnchor": [-7, -65], // point from which the popup should open relative to the iconAnchor
            "className": "dot"
        }
    }
}];

// Set a custom icon on each marker based on feature properties.
myLayer.on('layeradd', function(e) {
    var marker = e.layer,
        feature = marker.feature;

    marker.setIcon(L.icon(feature.properties.icon));
});

// Add features to the map.
myLayer.setGeoJSON(geoJson);

</script>


</body>
</html>
